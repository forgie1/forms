/*! netteForms.js | (c) 2004 David Grudl (https://davidgrudl.com) */
!function(a,b){if(a.JSON){if("function"==typeof define&&define.amd)define(function(){return b(a)});else if("object"==typeof module&&"object"==typeof module.exports)module.exports=b(a);else{var c=!a.Nette||!a.Nette.noInit;a.Nette=b(a),c&&a.Nette.initOnLoad()}}}("undefined"!=typeof window?window:this,function(b){"use strict";var a={},c={},d={},e=new b.WeakMap;return a.formErrors=[],a.version="3.3.0",a.invalidNumberMessage="Please enter a valid value.",a.onDocumentReady=function(a){"loading"!==document.readyState?a.call(this):document.addEventListener("DOMContentLoaded",a)},a.getValue=function(b){var c;if(!b)return null;if(!b.tagName)return b[0]?a.getValue(b[0]):null;if("radio"===b.type){var d=b.form.elements;for(c=0;c<d.length;c++)if(d[c].name===b.name&&d[c].checked)return d[c].value;return null}if("file"===b.type)return b.files||b.value;if("select"===b.tagName.toLowerCase()){var g=b.selectedIndex,f=b.options,e=[];if("select-one"===b.type)return g<0?null:f[g].value;for(c=0;c<f.length;c++)f[c].selected&&e.push(f[c].value);return e}if(b.name&&"[]"===b.name.substr(-2)){for(c=0,d=b.form.elements[b.name].tagName?[b]:b.form.elements[b.name],e=[];c<d.length;c++)("checkbox"!==d[c].type||d[c].checked)&&e.push(d[c].value);return e}if("checkbox"===b.type)return b.checked;else if("textarea"===b.tagName.toLowerCase())return b.value.replace("\r","");else return b.value.replace("\r","").replace(/^\s+|\s+$/g,"")},a.getEffectiveValue=function(b,f){var d=a.getValue(b);if(b.getAttribute&&d===b.getAttribute("data-nette-empty-value")&&(d=""),f&& void 0===c[b.name]){c[b.name]=!0;var e={value:d};a.validateControl(b,null,!0,e),d=e.value,delete c[b.name]}return d},a.validateControl=function(c,f,i,e,g){var k=!f;c=c.tagName?c:c[0],f=f||JSON.parse(c.getAttribute("data-nette-rules")||"[]"),e=void 0===e?{value:a.getEffectiveValue(c)}:e,g=void 0===g?!a.validateRule(c,":filled",null,e):g;for(var j=0,m=f.length;j<m;j++){var b=f[j],l=b.op.match(/(~)?([^?]+)/),d=b.control?c.form.elements.namedItem(b.control):c;if(b.neg=l[1],b.op=l[2],b.condition=!!b.rules,d&&(!g||b.condition||":filled"===b.op)){d=d.tagName?d:d[0];var h=a.validateRule(d,b.op,b.arg,c===d?e:void 0);if(null!==h){if(b.neg&&(h=!h),b.condition&&h){if(!a.validateControl(c,b.rules,i,e,":blank"!==b.op&&g))return!1}else if(!b.condition&&!h){if(a.isDisabled(d))continue;if(!i){var o=Array.isArray(b.arg)?b.arg:[b.arg],n=b.msg.replace(/%(value|\d+)/g,function(e,b){return a.getValue("value"===b?d:c.form.elements.namedItem(o[b].control))});a.addError(d,n)}return!1}}}}return"number"!==c.type||!!c.validity.valid||(k&&!i&&a.addError(c,a.invalidNumberMessage),!k)},a.validateForm=function(f,i){var c=f.form||f,e=!1;if(a.formErrors=[],c["nette-submittedBy"]&&null!==c["nette-submittedBy"].getAttribute("formnovalidate")){var g=JSON.parse(c["nette-submittedBy"].getAttribute("data-nette-validation-scope")||"[]");if(!g.length)return a.showFormErrors(c,[]),!0;e=new RegExp("^("+g.join("-|")+"-)")}var d,b,h={};for(d=0;d<c.elements.length;d++)if(!(b=c.elements[d]).tagName||b.tagName.toLowerCase() in{input:1,select:1,textarea:1,button:1}){if("radio"===b.type){if(h[b.name])continue;h[b.name]=!0}if(!(e&&!b.name.replace(/]\[|\[|]|$/g,"-").match(e)||a.isDisabled(b))&& !a.validateControl(b,null,i)&&!a.formErrors.length)return!1}var j=!a.formErrors.length;return a.showFormErrors(c,a.formErrors),j},a.isDisabled=function(a){if("radio"===a.type){for(var b=0,c=a.form.elements;b<c.length;b++)if(c[b].name===a.name&&!c[b].disabled)return!1;return!0}return a.disabled},a.addError=function(b,c){a.formErrors.push({element:b,message:c})},a.showFormErrors=function(h,d){for(var e,b=[],c=0;c<d.length;c++){var f=d[c].element,g=d[c].message;0>b.indexOf(g)&&(b.push(g),!e&&f.focus&&(e=f))}b.length&&a.showModal(b.join("\n"),function(){e&&e.focus()})},a.showModal=function(c,f){var a=document.createElement("dialog"),d=navigator.userAgentData;if(d&&a.showModal&&d.brands.some(function(a){return"Opera"===a.brand||"Chromium"===a.brand&&d.mobile})){var e=document.createElement("style");e.innerText=".netteFormsModal { text-align: center; margin: auto; border: 2px solid black; padding: 1rem } .netteFormsModal button { padding: .1em 2em }";var b=document.createElement("button");b.innerText="OK",b.onclick=function(){a.remove(),f()},a.setAttribute("class","netteFormsModal"),a.innerText=c+"\n\n",a.appendChild(e),a.appendChild(b),document.body.appendChild(a),a.showModal();return}alert(c),f()},a.validateRule=function(f,b,g,d){d=void 0===d?{value:a.getEffectiveValue(f,!0)}:d,":"===b.charAt(0)&&(b=b.substr(1)),b=(b=b.replace("::","_")).replace(/\\/g,"");for(var c=Array.isArray(g)?g.slice(0):[g],e=0,i=c.length;e<i;e++)if(c[e]&&c[e].control){var h=f.form.elements.namedItem(c[e].control);c[e]=h===f?d.value:a.getEffectiveValue(h,!0)}return a.validators[b]?a.validators[b](f,Array.isArray(g)?c:c[0],d.value,d):null},a.validators={filled:function(c,d,a){return"number"===c.type&&!!c.validity.badInput||""!==a&& !1!==a&&null!==a&&(!Array.isArray(a)||!!a.length)&&(!b.FileList||!(a instanceof b.FileList)||a.length)},blank:function(b,c,d){return!a.validators.filled(b,c,d)},valid:function(b){return a.validateControl(b,null,!0)},equal:function(h,a,b){if(void 0===a)return null;var e=function(a){return"number"==typeof a||"string"==typeof a?""+a:!0===a?"1":""};b=Array.isArray(b)?b:[b],a=Array.isArray(a)?a:[a];loop:for(var c=0,f=b.length;c<f;c++){for(var d=0,g=a.length;d<g;d++)if(e(b[c])===e(a[d]))continue loop;return!1}return b.length>0},notEqual:function(c,b,d){return void 0===b?null:!a.validators.equal(c,b,d)},minLength:function(a,b,c){if("number"===a.type){if(a.validity.tooShort)return!1;if(a.validity.badInput)return null}return c.length>=b},maxLength:function(a,b,c){if("number"===a.type){if(a.validity.tooLong)return!1;if(a.validity.badInput)return null}return c.length<=b},length:function(b,a,c){if("number"===b.type){if(b.validity.tooShort||b.validity.tooLong)return!1;if(b.validity.badInput)return null}return(null===(a=Array.isArray(a)?a:[a,a])[0]||c.length>=a[0])&&(null===a[1]||c.length<=a[1])},email:function(b,c,a){return/^("([ !#-[\]-~]|\\[ -~])+"|[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*)@([0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)+[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?$/i.test(a)},url:function(c,d,a,b){return/^[a-z\d+.-]+:/.test(a)||(a="https://"+a),!!/^https?:\/\/((([-_0-9a-z\u00C0-\u02FF\u0370-\u1EFF]+\.)*[0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)?[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[[0-9a-f:]{3,39}\])(:\d{1,5})?(\/\S*)?$/i.test(a)&&(b.value=a,!0)},regexp:function(d,b,c){var a="string"==typeof b&&b.match(/^\/(.*)\/([imu]*)$/);try{return a&&new RegExp(a[1],a[2].replace("u","")).test(c)}catch(e){}},pattern:function(g,c,a,h,f){if("string"!=typeof c)return null;try{try{var d=new RegExp("^(?:"+c+")$",f?"ui":"u")}catch(i){d=new RegExp("^(?:"+c+")$",f?"i":"")}if(b.FileList&&a instanceof FileList){for(var e=0;e<a.length;e++)if(!d.test(a[e].name))return!1;return!0}return d.test(a)}catch(j){}},patternCaseInsensitive:function(b,c,d){return a.validators.pattern(b,c,d,null,!0)},numeric:function(a,c,b){return("number"!==a.type||!a.validity.badInput)&&/^[0-9]+$/.test(b)},integer:function(a,c,b){return("number"!==a.type||!a.validity.badInput)&&/^-?[0-9]+$/.test(b)},float:function(b,d,a,c){return("number"!==b.type||!b.validity.badInput)&&(a=a.replace(/ +/g,"").replace(/,/g,"."),!!/^-?[0-9]*\.?[0-9]+$/.test(a)&&(c.value=a,!0))},min:function(a,b,c){if("number"===a.type){if(a.validity.rangeUnderflow)return!1;if(a.validity.badInput)return null}return null===b||parseFloat(c)>=b},max:function(a,b,c){if("number"===a.type){if(a.validity.rangeOverflow)return!1;if(a.validity.badInput)return null}return null===b||parseFloat(c)<=b},range:function(b,a,c){if("number"===b.type){if(b.validity.rangeUnderflow||b.validity.rangeOverflow)return!1;if(b.validity.badInput)return null}return Array.isArray(a)?(null===a[0]||parseFloat(c)>=a[0])&&(null===a[1]||parseFloat(c)<=a[1]):null},submitted:function(a){return a.form["nette-submittedBy"]===a},fileSize:function(e,d,c){if(b.FileList){for(var a=0;a<c.length;a++)if(c[a].size>d)return!1}return!0},mimeType:function(f,c,d){c=Array.isArray(c)?c:[c];for(var a=0,g=c.length,e=[];a<g;a++)e.push("^"+c[a].replace(/([^\w])/g,"\\$1").replace("\\*",".*")+"$");if(e=new RegExp(e.join("|")),b.FileList&&d instanceof FileList)for(a=0;a<d.length;a++){if(d[a].type&&!e.test(d[a].type))return!1;if(f.validity.badInput)return null}return!0},image:function(b,d,c){return a.validators.mimeType(b,["image/gif","image/png","image/jpeg","image/webp"],c)},static:function(b,a){return a}},a.toggleForm=function(c,e){var b;for(b=0,d={};b<c.elements.length;b++)c.elements[b].tagName.toLowerCase() in{input:1,select:1,textarea:1,button:1}&&a.toggleControl(c.elements[b],null,null,!e);for(b in d)a.toggle(b,d[b].state,d[b].elem,e)},a.toggleControl=function(f,m,n,p,h,j){m=m||JSON.parse(f.getAttribute("data-nette-rules")||"[]"),h=void 0===h?{value:a.getEffectiveValue(f)}:h,j=void 0===j?!a.validateRule(f,":filled",null,h):j;for(var g,q=!1,o=0,s=m.length;o<s;o++){var b=m[o],r=b.op.match(/(~)?([^?]+)/),c=b.control?f.form.elements.namedItem(b.control):f;if(b.neg=r[1],b.op=r[2],b.condition=!!b.rules,c&&(!j||b.condition||":filled"===b.op)){if(g=n,!1!==n){if(null===(g=a.validateRule(c,b.op,b.arg,f===c?h:void 0)))continue;b.neg&&(g=!g),b.condition||(n=g)}if(b.condition&&a.toggleControl(f,b.rules,g,p,h,":blank"!==b.op&&j)||b.toggle){if(q=!0,p)for(var t=c.tagName?c.name:c[0].name,k=c.tagName?c.form.elements:c,i=0;i<k.length;i++)k[i].name!==t||e.has(k[i])||(k[i].addEventListener("change",function(b){a.toggleForm(f.form,b)}),e.set(k[i],null));for(var l in b.toggle||[])d[l]=d[l]||{elem:f},d[l].state=d[l].state||(b.toggle[l]?g:!g)}}}return q},a.toggle=function(a,d,e,f){/^\w[\w.:-]*$/.test(a)&&(a="#"+a);for(var c=document.querySelectorAll(a),b=0;b<c.length;b++)c[b].hidden=!d},a.compactCheckboxes=function(c){var b,e,a,d={};for(e=0;e<c.elements.length;e++)(a=c.elements[e]).tagName&&"input"===a.tagName.toLowerCase()&&"checkbox"===a.type&&(a.name&&"[]"===a.name.substr(-2)&&(b=a.name.substr(0,a.name.length-2),a.removeAttribute("name"),a.setAttribute("data-nette-name",b)),(b=a.getAttribute("data-nette-name"))&&(d[b]=d[b]||[],a.checked&&!a.disabled&&d[b].push(a.value)));for(b in d)void 0===c.elements[b]&&((a=document.createElement("input")).setAttribute("name",b),a.setAttribute("type","hidden"),c.appendChild(a)),c.elements[b].value=d[b].join(","),c.elements[b].disabled=0===d[b].length},a.initForm=function(b){"get"===b.method&&b.hasAttribute("data-nette-compact")&&b.addEventListener("submit",function(){a.compactCheckboxes(b)});check:{for(var c=0;c<b.elements.length;c++)if(b.elements[c].getAttribute("data-nette-rules"))break check;return}a.toggleForm(b),b.noValidate||(b.noValidate=!0,b.addEventListener("submit",function(c){a.validateForm(b)||(c.stopPropagation(),c.preventDefault())}))},a.initOnLoad=function(){a.onDocumentReady(function(){for(var b=0;b<document.forms.length;b++)a.initForm(document.forms[b]);document.body.addEventListener("click",function(b){for(var a=b.target;a;){if(a.form&&a.type in{submit:1,image:1}){a.form["nette-submittedBy"]=a;break}a=a.parentNode}})})},a.webalize=function(b){b=b.toLowerCase();var c,d="";for(c=0;c<b.length;c++)d+=a.webalizeTable[b.charAt(c)]||b.charAt(c);return d.replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")},a.webalizeTable={á:"a",ä:"a",č:"c",ď:"d",é:"e",ě:"e",í:"i",ľ:"l",ň:"n",ó:"o",ô:"o",ř:"r",š:"s",ť:"t",ú:"u",ů:"u",ý:"y",ž:"z"},a})